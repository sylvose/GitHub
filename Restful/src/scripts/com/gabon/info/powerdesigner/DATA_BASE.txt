-- deleting run time data 



/*

DROP SEQUENCE UQAM.DEPARTMENT_SEQ;
DROP TABLE UQAM.DEPARTMENT CASCADE CONSTRAINTS;

DROP SEQUENCE UQAM.USERS_SEQ;
DROP TABLE UQAM.USERS CASCADE CONSTRAINTS;

DROP SEQUENCE UQAM.OFFICE_SEQ;
DROP TABLE UQAM.OFFICE CASCADE CONSTRAINTS;

DROP SEQUENCE UQAM.ROLES_SEQ;
DROP TABLE UQAM.ROLES CASCADE CONSTRAINTS;

DROP SEQUENCE UQAM.PROJECTS_SEQ;
DROP TABLE UQAM.PROJECTS CASCADE CONSTRAINTS;

DROP TABLE UQAM.USERS_PROJECTS CASCADE CONSTRAINTS;


COMMIT;

*/



------------------------------------------------------------------------------------------------ One-to-One Mappings : UsersToOffice -> relationship from Users to Office 


CREATE SEQUENCE UQAM.OFFICE_SEQ
         START WITH 0 MINVALUE -1 INCREMENT BY 1 NOCYCLE NOCACHE NOORDER;
         
CREATE TABLE UQAM.OFFICE  ( 
      ID NUMBER(10) NOT NULL,
      OFFICE VARCHAR2(255) NOT NULL, 
      PRIMARY KEY (ID)
); 

Insert into UQAM.OFFICE(ID, OFFICE) values(UQAM.OFFICE_SEQ.NEXTVAL, 'Green'); 
Insert into UQAM.OFFICE(ID, OFFICE) values(UQAM.OFFICE_SEQ.NEXTVAL, 'Yellow');
Insert into UQAM.OFFICE(ID, OFFICE) values(UQAM.OFFICE_SEQ.NEXTVAL, 'Blue');
Insert into UQAM.OFFICE(ID, OFFICE) values(UQAM.OFFICE_SEQ.NEXTVAL, 'Red');

------------------------------------------------------------------------------------------------ ManyToOne : UsersToDepartment -> relationship from Users to Department
  
CREATE SEQUENCE UQAM.DEPARTMENT_SEQ
         START WITH 0 MINVALUE -1 INCREMENT BY 1 NOCYCLE NOCACHE NOORDER;
         
CREATE TABLE UQAM.DEPARTMENT  ( 
      ID NUMBER(10) NOT NULL,
	  DEPARTMENT VARCHAR2(255) NOT NULL,
      PRIMARY KEY (ID)
); 

Insert into UQAM.DEPARTMENT(ID, DEPARTMENT) values(UQAM.DEPARTMENT_SEQ.NEXTVAL, 'IT'); 
Insert into UQAM.DEPARTMENT(ID, DEPARTMENT) values(UQAM.DEPARTMENT_SEQ.NEXTVAL, 'FINANCIAL');
Insert into UQAM.DEPARTMENT(ID, DEPARTMENT) values(UQAM.DEPARTMENT_SEQ.NEXTVAL, 'LOGISTIC');
Insert into UQAM.DEPARTMENT(ID, DEPARTMENT) values(UQAM.DEPARTMENT_SEQ.NEXTVAL, 'HR');

---------------------------------------------------------------------------------------------------------------------------------------------------------------------- 

CREATE SEQUENCE UQAM.USERS_SEQ
         START WITH 0 MINVALUE -1 INCREMENT BY 1 NOCYCLE NOCACHE NOORDER;
  
CREATE TABLE UQAM.USERS ( 
          ID NUMBER(10) NOT NULL,
          OFFICEID NUMBER(10) NOT NULL,
          DEPARTMENTID NUMBER(10) NOT NULL,
          NAME VARCHAR2(255) NOT NULL, 
          EMAIL VARCHAR2(255),
          PRIMARY KEY (ID),
		  UNIQUE(NAME, EMAIL),
          CONSTRAINT CST_FK_USER_OFFICEID FOREIGN KEY (OFFICEID) REFERENCES UQAM.OFFICE(ID) ON DELETE CASCADE,
          CONSTRAINT CST_FK_USER_DEPARTMENTID FOREIGN KEY (DEPARTMENTID) REFERENCES UQAM.DEPARTMENT(ID) ON DELETE CASCADE
);

Insert into UQAM.USERS(ID, OFFICEID, DEPARTMENTID, NAME, EMAIL) values(UQAM.USERS_SEQ.NEXTVAL, 1, 1, 'Allogo', 'asylvose@yahoo.fr'); 
Insert into UQAM.USERS(ID, OFFICEID, DEPARTMENTID, NAME, EMAIL) values(UQAM.USERS_SEQ.NEXTVAL, 2, 2, 'Allogo', 'americains@hitmail.com');
Insert into UQAM.USERS(ID, OFFICEID, DEPARTMENTID, NAME, EMAIL) values(UQAM.USERS_SEQ.NEXTVAL, 3, 3, 'Sylvose', 'jacque@gmail.com');
Insert into UQAM.USERS(ID, OFFICEID, DEPARTMENTID, NAME, EMAIL) values(UQAM.USERS_SEQ.NEXTVAL, 4, 4, 'Sylvose', 'george@msn.com');

------------------------------------------------------------------------------------------------ OneToMany : UsersToRoles -> relationship from Users to Role
CREATE SEQUENCE UQAM.ROLES_SEQ
         START WITH 0 MINVALUE -1 INCREMENT BY 1 NOCYCLE NOCACHE NOORDER;
  
CREATE TABLE UQAM.ROLES  ( 
      ID NUMBER(10) NOT NULL,
      USERSID NUMBER(10) NOT NULL,
	    ROLE VARCHAR2(255) NOT NULL,
      PRIMARY KEY (ID),
      CONSTRAINT CST_FK_ROLE_USERSID FOREIGN KEY (USERSID) REFERENCES UQAM.USERS(ID) ON DELETE CASCADE
); 

Insert into UQAM.ROLES(ID, USERSID, ROLE) values(UQAM.ROLES_SEQ.NEXTVAL, 1, 'admin'); 
Insert into UQAM.ROLES(ID, USERSID, ROLE) values(UQAM.ROLES_SEQ.NEXTVAL, 2, 'master');
Insert into UQAM.ROLES(ID, USERSID, ROLE) values(UQAM.ROLES_SEQ.NEXTVAL, 3, 'guest');
Insert into UQAM.ROLES(ID, USERSID, ROLE) values(UQAM.ROLES_SEQ.NEXTVAL, 4, 'vip');

------------------------------------------------------------------------------------------------ ManyToMany : UsersToProjects -> relationship from Users to Projects

CREATE SEQUENCE UQAM.PROJECTS_SEQ
         START WITH 0 MINVALUE -1 INCREMENT BY 1 NOCYCLE NOCACHE NOORDER;
  
CREATE TABLE UQAM.PROJECTS  ( 
      ID NUMBER(10) NOT NULL,
	  PROJECT VARCHAR2(255) NOT NULL,
      PRIMARY KEY (ID)
); 

Insert into UQAM.PROJECTS(ID, PROJECT) values(UQAM.PROJECTS_SEQ.NEXTVAL, 'FREEDOMONE'); 
Insert into UQAM.PROJECTS(ID, PROJECT) values(UQAM.PROJECTS_SEQ.NEXTVAL, 'RFTB');
Insert into UQAM.PROJECTS(ID, PROJECT) values(UQAM.PROJECTS_SEQ.NEXTVAL, 'ENBB');
Insert into UQAM.PROJECTS(ID, PROJECT) values(UQAM.PROJECTS_SEQ.NEXTVAL, 'RAM');


CREATE TABLE UQAM.USERS_PROJECTS  ( 
	  USERSID NUMBER(10) NOT NULL,
      PROJECTSID NUMBER(10) NOT NULL,
      PRIMARY KEY (USERSID, PROJECTSID),
	  FOREIGN KEY (USERSID) REFERENCES UQAM.USERS(ID) ON DELETE CASCADE,
      FOREIGN KEY (PROJECTSID) REFERENCES UQAM.PROJECTS(ID) ON DELETE CASCADE
);

Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(1, 1); 
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(1, 2);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(1, 3);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(1, 4);

Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(2, 1); 
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(2, 2);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(2, 3);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(2, 4);

Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(3, 1); 
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(3, 2);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(3, 3);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(3, 4);

Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(4, 1); 
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(4, 2);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(4, 3);
Insert into UQAM.USERS_PROJECTS(USERSID, PROJECTSID) values(4, 4);



COMMIT;



/*
SELECT * FROM UQAM.USERS;

SELECT u.id, u.officeid, u.departmentid, u.name, u.email, p.projectsid, p.project 
FROM UQAM.USERS u, UQAM.PROJECTS p, UQAM.USERS_PROJECTS up 
WHERE u.id = up.usersid 
AND up.projectsid = p.id;

SELECT u.usersid, u.officeid, u.departmentid, u.name, u.email, p.projectsid, p.project 
FROM UQAM.USERS u, UQAM.PROJECTS p, UQAM.USERS_PROJECTS up 
WHERE u.id = 1 
AND u.id = up.usersid 
AND up.projectsid = p.id;

SELECT * 
FROM UQAM.DEPARTMENT;

SELECT * 
FROM UQAM.DEPARTMENT 
WHERE DEPARTMENT = 'FINANCIAL';
*/